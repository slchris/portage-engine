# Portage Engine Server Configuration

# Server bind address and port
SERVER_PORT=8080

# Binary package cache path
BINPKG_PATH=/var/cache/binpkgs

# Maximum build workers
MAX_WORKERS=5

# Build mode: remote or cloud
BUILD_MODE=remote

# Storage type: local, s3, or http
STORAGE_TYPE=local
STORAGE_LOCAL_DIR=/var/cache/binpkgs

# S3 storage configuration (when STORAGE_TYPE=s3)
# STORAGE_S3_BUCKET=my-binpkgs
# STORAGE_S3_REGION=us-east-1
# STORAGE_S3_PREFIX=gentoo/
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# HTTP storage configuration (when STORAGE_TYPE=http)
# STORAGE_HTTP_BASE=https://binpkgs.example.com

# GPG signing configuration
GPG_ENABLED=false
GPG_KEY_ID=
GPG_KEY_PATH=

# Cloud configuration
CLOUD_DEFAULT_PROVIDER=gcp

# Aliyun configuration
CLOUD_ALIYUN_REGION=cn-hangzhou
CLOUD_ALIYUN_ZONE=cn-hangzhou-a
# CLOUD_ALIYUN_ACCESS_KEY=your-aliyun-access-key
# CLOUD_ALIYUN_SECRET_KEY=your-aliyun-secret-key

# GCP configuration
CLOUD_GCP_PROJECT=portage-engine
CLOUD_GCP_REGION=us-central1
CLOUD_GCP_ZONE=us-central1-a

# GCP credentials - use one of these methods:
# 1. Service account key file (recommended for production)
# CLOUD_GCP_KEY_FILE=/path/to/gcp-service-account-key.json
#
# 2. Set GOOGLE_APPLICATION_CREDENTIALS environment variable
# export GOOGLE_APPLICATION_CREDENTIALS=/path/to/gcp-service-account-key.json
#
# 3. Use default application credentials (gcloud auth application-default login)

# GCP VM specifications
CLOUD_GCP_MACHINE_TYPE=n1-standard-4
CLOUD_GCP_DISK_SIZE_GB=100
CLOUD_GCP_DISK_TYPE=pd-ssd
CLOUD_GCP_IMAGE_FAMILY=ubuntu-2204-lts
CLOUD_GCP_IMAGE_PROJECT=ubuntu-os-cloud
CLOUD_GCP_NETWORK=default
# CLOUD_GCP_SUBNETWORK=
CLOUD_GCP_PREEMPTIBLE=false

# GCP Terraform state directory
# CLOUD_GCP_STATE_DIR=/var/lib/portage-engine/terraform

# GCP firewall allowed IP ranges (comma-separated CIDR)
# CLOUD_GCP_ALLOWED_IPS=10.0.0.0/8,192.168.0.0/16

# Cloud instance TTL in minutes (0 = no auto-termination)
# If instance has no active tasks after TTL, it will be automatically terminated
CLOUD_INSTANCE_TTL=60

# AWS configuration
CLOUD_AWS_REGION=us-east-1
CLOUD_AWS_ZONE=us-east-1a
# CLOUD_AWS_ACCESS_KEY=your-aws-access-key
# CLOUD_AWS_SECRET_KEY=your-aws-secret-key

# SSH configuration for cloud instances
# CLOUD_SSH_KEY_PATH=/path/to/ssh/key
# CLOUD_SSH_USER=root
# SERVER_CALLBACK_URL=http://your-server:8080

# Remote builders (comma-separated URLs)
REMOTE_BUILDERS=http://10.42.0.1:9090

# Metrics configuration
METRICS_ENABLED=false
METRICS_PORT=2112
# METRICS_PASSWORD=your-secure-password-here

# Logging configuration
LOG_ENABLED=true
LOG_LEVEL=INFO
LOG_DIR=/var/log/portage-engine
LOG_MAX_SIZE_MB=100
LOG_MAX_AGE_DAYS=30
LOG_MAX_BACKUPS=10
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=true
