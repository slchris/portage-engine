# Portage Engine Builder Configuration

# Builder server port
BUILDER_PORT=9090

# Number of concurrent build workers
BUILDER_WORKERS=2

# Use Docker for builds
USE_DOCKER=true
DOCKER_IMAGE=hub.infra.plz.ac/gentoo/stage3:latest

# Working directories
BUILD_WORK_DIR=/var/tmp/portage-builds
BUILD_ARTIFACT_DIR=/var/tmp/portage-artifacts

# Persistence configuration
DATA_DIR=/var/lib/portage-engine
PERSISTENCE_ENABLED=true
RETENTION_DAYS=7

# ===== Multi-Distro Support =====
# Host operating system type: gentoo, debian
# Default: gentoo
HOST_OS_TYPE=gentoo

# Mirror URL for package sync (e.g., portage rsync or apt mirror)
# For Gentoo: rsync://rsync.gentoo.org/gentoo-portage
# For Debian: http://deb.debian.org/debian
SYNC_MIRROR=

# Mirror URL for distfiles/packages download
# For Gentoo: https://distfiles.gentoo.org
# For Debian: http://deb.debian.org/debian
DISTFILES_MIRROR=

# ----- Gentoo-specific settings -----
# Path to portage repos directory
PORTAGE_REPOS_PATH=/var/db/repos

# Path to portage configuration directory
PORTAGE_CONF_PATH=/etc/portage

# Path to make.conf (if different from PORTAGE_CONF_PATH/make.conf)
MAKE_CONF_PATH=/etc/portage/make.conf

# ----- Debian-specific settings -----
# Path to apt sources directory
APT_SOURCES_PATH=/etc/apt

# Path to apt cache directory
APT_CACHE_PATH=/var/cache/apt

# Debian codename (e.g., bookworm, bullseye, sid)
DEBIAN_CODENAME=bookworm

# GPG signing configuration
GPG_ENABLED=false
GPG_KEY_ID=
GPG_KEY_PATH=

# Storage configuration
STORAGE_TYPE=local
STORAGE_LOCAL_DIR=/var/binpkgs

# S3 storage configuration (when STORAGE_TYPE=s3)
# STORAGE_S3_BUCKET=my-binpkgs
# STORAGE_S3_REGION=us-east-1
# STORAGE_S3_PREFIX=gentoo/
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# HTTP storage configuration (when STORAGE_TYPE=http)
# STORAGE_HTTP_BASE=https://binpkgs.example.com

# Server configuration (for GPG key distribution and artifact upload)
# SERVER_URL=http://localhost:8080

# Notification configuration file path (optional)
# NOTIFY_CONFIG=/path/to/notification.json

# Metrics configuration
METRICS_ENABLED=false
METRICS_PORT=2112
# METRICS_PASSWORD=your-secure-password-here

# Logging configuration
LOG_ENABLED=true
LOG_LEVEL=INFO
LOG_DIR=/var/log/portage-engine
LOG_MAX_SIZE_MB=100
LOG_MAX_AGE_DAYS=30
LOG_MAX_BACKUPS=10
LOG_ENABLE_CONSOLE=true
LOG_ENABLE_FILE=true
SERVER_URL=http://10.42.0.1:8080
